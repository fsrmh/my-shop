<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xin-Shop 3.0 | æ——èˆ°çº§ç”µå•†ç³»ç»Ÿ</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        [v-cloak] { display: none; }
        html { scroll-behavior: smooth; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .product-card:hover { transform: translateY(-5px); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 10px 20px rgba(0,0,0,0.08); }
        .gallery-thumbnail { border: 2px solid transparent; cursor: pointer; transition: all 0.2s; }
        .gallery-thumbnail.active { border-color: #3B82F6; transform: scale(1.05); }

        /* è´­ç‰©è½¦ä¾§æ»‘åŠ¨ç”» */
        @keyframes slideInFromRight { from { transform: translateX(100%); opacity: 0.8; } to { transform: translateX(0); opacity: 1; } }
        .slide-in-cart { animation: slideInFromRight 0.4s ease-out; }

        /* æ”¯ä»˜å¼¹çª—åŠ¨ç”» */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-modal { animation: fadeIn 0.3s ease-out; }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50 font-sans text-slate-800">

<div id="app" v-cloak>
    <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white text-xs py-2 text-center font-medium tracking-wide uppercase">
        <span class="animate-pulse">âœ¨ Xin-Shop 3.0 å…¨çƒé¦–å‘ | é™é‡å•†å“ç«çƒ­æŠ¢è´­ä¸­ âœ¨</span>
    </div>

    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-40 border-b border-slate-200 shadow-sm">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-8">
                <a href="#" class="text-3xl font-black tracking-tight text-slate-900">XIN<span class="text-blue-600">.</span>SHOP</a>
                <div class="hidden lg:flex gap-6 text-sm font-bold text-slate-600">
                    <button v-for="c in categories" @click="activeCategory = c" 
                            :class="['transition', activeCategory === c ? 'text-blue-600' : 'hover:text-slate-900']">
                        {{c}}
                    </button>
                </div>
            </div>
            
            <div class="flex items-center gap-5">
                <div class="relative hidden sm:block">
                    <input v-model="searchQuery" type="text" placeholder="æœç´¢é»‘ç§‘æŠ€..." 
                           class="bg-slate-100 border-none rounded-full py-2 pl-4 pr-10 text-sm w-48 focus:w-64 transition-all duration-300 focus:ring-2 focus:ring-blue-300">
                    <span class="absolute right-3 top-2 text-slate-400">ğŸ”</span>
                </div>
                <button @click="isCartOpen = true" class="p-2 hover:bg-slate-100 rounded-full relative transition">
                    <svg class="w-6 h-6 text-slate-600 hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
                    <span v-if="cartCount > 0" class="absolute -top-1 -right-1 bg-blue-600 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center font-bold animate-bounce-slow">
                        {{cartCount}}
                    </span>
                </button>
                 <button @click="showOrderHistory = true" class="p-2 hover:bg-slate-100 rounded-full relative transition">
                    <svg class="w-6 h-6 text-slate-600 hover:text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                </button>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-12">
        <section class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl p-8 md:p-12 mb-12 flex flex-col md:flex-row items-center justify-between text-white relative overflow-hidden shadow-xl">
            <div class="z-10 md:w-1/2 text-center md:text-left">
                <span class="text-blue-300 font-bold tracking-widest text-sm uppercase">é‡ç£…å‘å¸ƒ</span>
                <h2 class="text-4xl md:text-6xl font-black mt-4 mb-6 leading-tight">æ™ºæ ¸æ˜¾å¡ <br>RTX 5090 Ti <span class="text-blue-400 text-5xl">Ultra</span></h2>
                <p class="text-slate-400 mb-8 max-w-sm text-base leading-relaxed">2nm åˆ¶ç¨‹ï¼Œå†…ç½® Xin-Shop ä¸“å± AI å†·å´æ¨¡å—ï¼Œé™æ—¶é¦–å‘ï¼Œæ€§èƒ½å·…å³°ï¼</p>
                <button @click="scrollToProducts" class="bg-white text-slate-900 px-10 py-4 rounded-full font-bold hover:bg-blue-500 hover:text-white transition shadow-lg">æ¢ç´¢æ–°å“</button>
            </div>
            <div class="text-[14rem] md:text-[20rem] opacity-10 md:opacity-15 absolute right-0 bottom-0 pointer-events-none font-black tracking-tighter text-slate-700">GPU</div>
        </section>

        <section id="product-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
            <div v-for="product in filteredProducts" :key="product.id" @click="openProductDetail(product)"
                 class="product-card bg-white border border-slate-100 rounded-2xl p-5 hover:shadow-2xl hover:shadow-blue-50 transition-all duration-300 flex flex-col cursor-pointer">
                <div class="relative aspect-square mb-4 overflow-hidden rounded-xl bg-slate-100 flex items-center justify-center">
                    <img :src="product.images[0]" :alt="product.name" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" />
                    <div v-if="product.stock === 0" class="absolute inset-0 bg-black/50 text-white flex items-center justify-center text-lg font-bold">ç¼ºè´§</div>
                </div>
                <div class="flex-1 flex flex-col">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold text-lg text-slate-900">{{product.name}}</h3>
                        <span class="text-xl font-black text-blue-600">Â¥{{product.price}}</span>
                    </div>
                    <p class="text-sm text-slate-500 mb-4 line-clamp-2">{{product.shortDesc}}</p>
                </div>
                <div class="flex justify-between items-center mt-auto pt-4 border-t border-slate-100">
                    <span :class="['text-xs font-bold uppercase tracking-wider', product.stock > 0 ? 'text-green-600' : 'text-red-500']">
                        â— {{ product.stock > 0 ? 'æœ‰ç°è´§ (' + product.stock + ')' : 'æš‚æ— åº“å­˜' }}
                    </span>
                    <button @click.stop="addToCart(product)" :disabled="product.stock <= 0" 
                            class="bg-blue-600 text-white text-sm px-5 py-2 rounded-lg font-bold disabled:bg-slate-300 disabled:cursor-not-allowed hover:bg-blue-700 transition shadow-md">
                        åŠ å…¥è´­ç‰©è½¦
                    </button>
                </div>
            </div>
        </section>
    </main>

    <div v-if="selectedProduct" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl p-8 flex flex-col lg:flex-row gap-8 fade-in-modal relative">
            <button @click="closeProductDetail" class="absolute top-4 right-4 text-slate-500 hover:text-slate-900 text-3xl font-light">&times;</button>
            
            <div class="lg:w-1/2">
                <div class="relative w-full aspect-square bg-slate-100 rounded-lg overflow-hidden mb-4">
                    <img :src="selectedProduct.images[currentImageIndex]" :alt="selectedProduct.name" class="w-full h-full object-cover" />
                </div>
                <div class="flex gap-3 overflow-x-auto scrollbar-hide">
                    <img v-for="(img, index) in selectedProduct.images" :key="index" :src="img" 
                         @click="currentImageIndex = index"
                         :class="['w-16 h-16 object-cover rounded-md', 'gallery-thumbnail', { 'active': currentImageIndex === index }]" />
                </div>
            </div>

            <div class="lg:w-1/2 flex flex-col">
                <span class="text-sm font-bold text-blue-600 uppercase mb-2">{{selectedProduct.category}}</span>
                <h3 class="text-3xl font-black mb-4 leading-tight">{{selectedProduct.name}}</h3>
                <p class="text-slate-500 text-sm mb-6 flex-1">{{selectedProduct.longDesc}}</p>
                
                <div class="flex items-center justify-between mb-6">
                    <span class="text-4xl font-black text-blue-600">Â¥{{selectedProduct.price}}</span>
                    <span :class="['text-sm font-bold uppercase', selectedProduct.stock > 0 ? 'text-green-600' : 'text-red-500']">
                        åº“å­˜: {{ selectedProduct.stock > 0 ? selectedProduct.stock : 'æ— ' }}
                    </span>
                </div>
                
                <button @click="addToCart(selectedProduct); closeProductDetail();" :disabled="selectedProduct.stock <= 0"
                        class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold text-lg hover:bg-blue-700 transition disabled:bg-slate-300 disabled:cursor-not-allowed shadow-md">
                    {{ selectedProduct.stock > 0 ? 'ç«‹å³åŠ å…¥è´­ç‰©è½¦' : 'å•†å“å·²å”®ç½„' }}
                </button>
            </div>
        </div>
    </div>

    <div v-if="isCartOpen" class="fixed inset-0 z-50 flex justify-end">
        <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm" @click="isCartOpen = false"></div>
        <div class="relative w-full max-w-md bg-white shadow-2xl flex flex-col slide-in-cart">
            <div class="p-6 border-b flex justify-between items-center bg-slate-50">
                <h2 class="text-2xl font-black italic">æˆ‘çš„è´­ç‰©æ¸…å•</h2>
                <button @click="isCartOpen = false" class="text-slate-400 hover:text-slate-900 text-3xl font-light">&times;</button>
            </div>

            <div class="flex-1 overflow-y-auto p-6 scrollbar-hide">
                <div v-if="cart.length === 0" class="text-center py-20">
                    <div class="text-6xl mb-4">ğŸ“¦</div>
                    <p class="text-slate-400 font-medium text-lg">æ‚¨çš„è´­ç‰©ç¯®ç©ºç©ºå¦‚ä¹Ÿ</p>
                </div>
                <div v-for="item in cart" :key="item.id" class="flex gap-4 mb-6 pb-6 border-b border-slate-100">
                    <div class="w-24 h-24 bg-slate-100 rounded-xl flex items-center justify-center overflow-hidden">
                        <img :src="item.images[0]" :alt="item.name" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1 flex flex-col justify-between">
                        <div>
                            <div class="flex justify-between font-bold text-slate-900">
                                <span class="text-base">{{item.name}}</span>
                                <span class="text-lg">Â¥{{item.price * item.qty}}</span>
                            </div>
                            <p class="text-slate-500 text-xs mt-1">å•ä»·: Â¥{{item.price}}</p>
                        </div>
                        <div class="flex items-center gap-3 mt-3">
                            <button @click="changeQty(item, -1)" class="w-7 h-7 border rounded-md flex items-center justify-center text-sm text-slate-600 hover:bg-slate-100">-</button>
                            <span class="text-base w-5 text-center font-bold">{{item.qty}}</span>
                            <button @click="changeQty(item, 1)" class="w-7 h-7 border rounded-md flex items-center justify-center text-sm text-slate-600 hover:bg-slate-100">+</button>
                            <button @click="removeItem(item)" class="ml-auto text-red-500 text-xs hover:underline">åˆ é™¤</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-6 border-t bg-slate-50">
                <div class="flex justify-between mb-2 text-sm text-slate-500">
                    <span>å•†å“å°è®¡</span>
                    <span>Â¥{{subtotal}}</span>
                </div>
                <div class="flex justify-between mb-6 text-sm text-slate-500">
                    <span>é¢„ä¼°è¿è´¹</span>
                    <span>{{subtotal >= 2000 ? 'å…è´¹' : 'Â¥20'}}</span>
                </div>
                <div class="flex justify-between mb-8 text-xl font-black text-slate-900">
                    <span>æ€»è®¡</span>
                    <span class="text-blue-600">Â¥{{total}}</span>
                </div>
                <button @click="openPaymentModal" :disabled="cart.length === 0" 
                        class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-blue-700 transition shadow-xl disabled:bg-slate-300 disabled:cursor-not-allowed">
                    å»ç»“ç®—
                </button>
            </div>
        </div>
    </div>

    <div v-if="isPaymentModalOpen" class="fixed inset-0 bg-black/70 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-8 fade-in-modal relative">
            <button @click="closePaymentModal" class="absolute top-4 right-4 text-slate-500 hover:text-slate-900 text-3xl font-light">&times;</button>
            <h2 class="text-2xl font-black mb-6 text-center">å®Œæˆæ”¯ä»˜</h2>
            
            <div class="mb-6">
                <div class="flex justify-between text-xl font-bold mb-4">
                    <span>è®¢å•æ€»é¢:</span>
                    <span class="text-blue-600">Â¥{{total}}</span>
                </div>
                <label for="cardNum" class="block text-sm font-medium text-slate-700 mb-2">é“¶è¡Œå¡å·</label>
                <input type="text" id="cardNum" v-model="paymentDetails.cardNumber" placeholder="**** **** **** ****"
                       class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none text-lg tracking-wider" maxlength="19">
            </div>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div>
                    <label for="expiry" class="block text-sm font-medium text-slate-700 mb-2">æœ‰æ•ˆæœŸ</label>
                    <input type="text" id="expiry" v-model="paymentDetails.expiryDate" placeholder="MM/YY"
                           class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none" maxlength="5">
                </div>
                <div>
                    <label for="cvv" class="block text-sm font-medium text-slate-700 mb-2">CVV</label>
                    <input type="text" id="cvv" v-model="paymentDetails.cvv" placeholder="***"
                           class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none" maxlength="3">
                </div>
            </div>

            <button @click="processPayment" :disabled="!isPaymentFormValid"
                    class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-blue-700 transition shadow-lg disabled:bg-slate-300 disabled:cursor-not-allowed">
                ç¡®è®¤æ”¯ä»˜ Â¥{{total}}
            </button>
        </div>
    </div>

    <div v-if="showOrderHistory" class="fixed inset-0 bg-black/60 z-50 flex justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl p-8 fade-in-modal relative">
            <button @click="showOrderHistory = false" class="absolute top-4 right-4 text-slate-500 hover:text-slate-900 text-3xl font-light">&times;</button>
            <h2 class="text-2xl font-black mb-8 text-center">æˆ‘çš„è®¢å•å†å²</h2>
            
            <div v-if="orders.length === 0" class="text-center py-20 text-slate-400">
                <div class="text-6xl mb-4">ğŸ“œ</div>
                æ‚¨è¿˜æ²¡æœ‰å®Œæˆä»»ä½•è®¢å•ã€‚
            </div>

            <div v-else class="overflow-y-auto max-h-[70vh] scrollbar-hide">
                <div v-for="order in orders" :key="order.id" class="mb-8 p-6 bg-slate-50 rounded-lg border border-slate-100 shadow-sm">
                    <div class="flex justify-between items-center mb-4 pb-4 border-b border-slate-200">
                        <span class="text-sm font-medium text-slate-700">è®¢å•å·: <b class="text-blue-600">{{order.id}}</b></span>
                        <span class="text-sm text-slate-500">{{new Date(order.date).toLocaleString()}}</span>
                    </div>
                    <div v-for="item in order.items" :key="item.id" class="flex items-center gap-4 mb-3">
                        <div class="w-12 h-12 bg-slate-100 rounded-md overflow-hidden">
                            <img :src="item.images[0]" :alt="item.name" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold text-sm">{{item.name}}</h4>
                            <p class="text-slate-500 text-xs">æ•°é‡: {{item.qty}} x Â¥{{item.price}}</p>
                        </div>
                        <span class="font-bold text-slate-900">Â¥{{item.price * item.qty}}</span>
                    </div>
                    <div class="mt-6 pt-4 border-t border-slate-200 flex justify-between font-bold text-lg">
                        <span>è®¢å•æ€»é¢:</span>
                        <span class="text-blue-600">Â¥{{order.total}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp, ref, computed, onMounted } = Vue;

    createApp({
        setup() {
            // --- ä¸¥è°¨çš„çŠ¶æ€ç®¡ç† ---
            const searchQuery = ref('');
            const activeCategory = ref('å…¨éƒ¨');
            const categories = ['å…¨éƒ¨', 'æ ¸å¿ƒç¡¬ä»¶', 'å¤–è®¾å‘¨è¾¹', 'ç§»åŠ¨ç«¯', 'æ™ºé€ å·¥å…·'];
            
            const isCartOpen = ref(false);
            const isPaymentModalOpen = ref(false);
            const showOrderHistory = ref(false);

            const selectedProduct = ref(null);
            const currentImageIndex = ref(0);

            const paymentDetails = ref({
                cardNumber: '', expiryDate: '', cvv: ''
            });

            // ä¸¥è°¨çš„å•†å“æ•°æ®åº“ (å«å¤šå›¾å’Œè¯¦ç»†æè¿°)
            const products = ref([
                { 
                    id: 1, name: "æ™ºæ ¸ RTX 5090 Ti Ultra", category: "æ ¸å¿ƒç¡¬ä»¶", price: 18999, stock: 5, 
                    images: ['https://s2.loli.net/2024/02/09/x6b8oWc51G2EwQz.jpg', 'https://s2.loli.net/2024/02/09/O93c6lJd4tWjPnk.jpg', 'https://s2.loli.net/2024/02/09/yL5tA7Mhrx3nU9P.jpg'],
                    shortDesc: "2nm åˆ¶ç¨‹ï¼Œå†…ç½® Xin-Shop ä¸“å± AI å†·å´æ¨¡å—ï¼Œæ€§èƒ½å·…å³°ã€‚",
                    longDesc: "è¿™æ˜¯ NVIDIA å’Œ Xin-Shop è”åˆæ¨å‡ºçš„ 2026 å¹´æ——èˆ°çº§æ˜¾å¡ï¼Œé‡‡ç”¨é©å‘½æ€§ 2nm Blackwell æ¶æ„ï¼Œæ‹¥æœ‰ 24576 ä¸ª CUDA æ ¸å¿ƒï¼Œæ­è½½ 48GB GDDR7 æ˜¾å­˜ã€‚å†…ç½®çš„ AI å†·å´ç³»ç»Ÿèƒ½å¤Ÿæ ¹æ®å®æ—¶è´Ÿè½½æ™ºèƒ½è°ƒæ•´æ•£çƒ­ç­–ç•¥ï¼Œç¡®ä¿æ ¸å¿ƒæ¸©åº¦æ°¸è¿œå¤„äºæœ€ä½³å·¥ä½œåŒºé—´ã€‚æ— è®ºæ˜¯ 8K æ¸¸æˆã€ä¸“ä¸šçº§ 3D æ¸²æŸ“ï¼Œè¿˜æ˜¯å¤§è§„æ¨¡ AI æ¨¡å‹è®­ç»ƒï¼Œéƒ½èƒ½æä¾›æ— ä¸ä¼¦æ¯”çš„æ€§èƒ½è¡¨ç°ã€‚é™é‡å‘å”®ï¼Œæ¯äººé™è´­ä¸€å¼ ã€‚"
                },
                { 
                    id: 2, name: "é‡å­ç£æ‚¬æµ®é”®ç›˜", category: "å¤–è®¾å‘¨è¾¹", price: 2199, stock: 12, 
                    images: ['https://s2.loli.net/2024/02/09/vFqKk18WcQd7rJh.jpg', 'https://s2.loli.net/2024/02/09/7j1OaN8dYQ4tqPM.jpg', 'https://s2.loli.net/2024/02/09/p9YgqDCMOaFkK5V.jpg'],
                    shortDesc: "é›¶å»¶è¿Ÿç£è½´è§¦å‘ï¼Œå…¨é“é˜³ææ°§åŒ–æœºèº«ï¼Œå¸¦æ¥æè‡´è¾“å…¥ä½“éªŒã€‚",
                    longDesc: "è¿™æ¬¾é”®ç›˜é‡‡ç”¨æœ€æ–°çš„éœå°”æ•ˆåº”ç£æ‚¬æµ®å¼€å…³æŠ€æœ¯ï¼Œå®ç°äº†çœŸæ­£æ„ä¹‰ä¸Šçš„é›¶ç‰©ç†å»¶è¿Ÿè§¦å‘ã€‚æ¯ä¸ªæŒ‰é”®çš„è§¦å‘è¡Œç¨‹å’ŒåŠ›åº¦éƒ½å¯è‡ªå®šä¹‰è°ƒèŠ‚ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚å…¨é“ CNC æœºèº«æ­é… PBT é”®å¸½ï¼Œè§¦æ„Ÿå†°å‡‰é¡ºæ»‘ï¼Œè€ç£¨ä¸æ‰“æ²¹ã€‚RGB èƒŒå…‰ç³»ç»Ÿæ”¯æŒ 1600 ä¸‡è‰²è‡ªå®šä¹‰ï¼Œå¯é€šè¿‡ Xin-Studio è½¯ä»¶è¿›è¡Œå®ç¼–ç¨‹å’Œç¯æ•ˆè”åŠ¨ã€‚é€‚ç”¨äºç”µç«ç©å®¶å’Œä¸“ä¸šç¨‹åºå‘˜ã€‚"
                },
                { 
                    id: 3, name: "Xin-Phone 18 Pro Max", category: "ç§»åŠ¨ç«¯", price: 9999, stock: 8, 
                    images: ['https://s2.loli.net/2024/02/09/Ua7YhC6nZzQJkGg.jpg', 'https://s2.loli.net/2024/02/09/Q2x7j4S981PcF3J.jpg', 'https://s2.loli.net/2024/02/09/6lq7L8xXQfYWzaO.jpg'],
                    shortDesc: "é’›é‡‘å±ä¸­æ¡†ï¼Œæ­è½½ X1 ä»¿ç”Ÿæ™ºæ ¸èŠ¯ç‰‡ï¼Œå½±åƒç³»ç»Ÿå…¨é¢å‡çº§ã€‚",
                    longDesc: "Xin-Phone 18 Pro Max æ˜¯æˆ‘ä»¬æ——èˆ°æ™ºèƒ½æ‰‹æœºçš„å·…å³°ä¹‹ä½œã€‚é‡‡ç”¨èˆªç©ºçº§é’›é‡‘å±ä¸­æ¡†ï¼Œæè‡´è½»è–„ä¸”åšå›ºã€‚æ­è½½å…¨æ–°çš„ X1 ä»¿ç”Ÿæ™ºæ ¸èŠ¯ç‰‡ï¼ŒAI æ€§èƒ½æå‡ 500%ï¼Œèƒ½è€—é™ä½ 30%ã€‚åç½®å››æ‘„ç³»ç»Ÿï¼ŒåŒ…æ‹¬ä¸€é¢— 2 äº¿åƒç´ ä¸»æ‘„ï¼Œæ”¯æŒ 8K 60fps æœæ¯”è§†ç•Œå½•åˆ¶ã€‚ProMotion XDR æ˜¾ç¤ºå±ï¼Œå³°å€¼äº®åº¦è¾¾åˆ° 3000 å°¼ç‰¹ã€‚å…¨æ–°çš„å«æ˜Ÿé€šä¿¡æ¨¡å—ï¼Œè®©ä½ åœ¨ä»»ä½•è§’è½éƒ½èƒ½ä¿æŒè”ç³»ã€‚é™„èµ  1TB è¶…é«˜é€Ÿé—ªå­˜å¡ã€‚"
                },
                { 
                    id: 4, name: "æ™ºé€ ç¬” 3.0", category: "æ™ºé€ å·¥å…·", price: 699, stock: 15, 
                    images: ['https://s2.loli.net/2024/02/09/XN17FkL9I4c6yZt.jpg', 'https://s2.loli.net/2024/02/09/P9uBv4Azn6mDqQY.jpg', 'https://s2.loli.net/2024/02/09/5l9D6iF4kUaGzPj.jpg'],
                    shortDesc: "å®æ—¶å‹åŠ›æ„Ÿåº”ï¼Œå€¾æ–œè¯†åˆ«ï¼Œé€‚ç”¨äºä¸“ä¸šç»˜å›¾å’Œç¬”è®°ã€‚",
                    longDesc: "æ™ºé€ ç¬” 3.0 æ˜¯ä¸€æ¬¾ä¸ºåˆ›æ„ä¸“ä¸šäººå£«å’Œå­¦ç”Ÿè®¾è®¡çš„ç²¾å¯†è¾“å…¥å·¥å…·ã€‚å®ƒæ‹¥æœ‰ 8192 çº§å‹æ„Ÿå’Œ 60 åº¦å€¾æ–œè¯†åˆ«ï¼Œæä¾›çº¸ç¬”èˆ¬çš„çœŸå®ä¹¦å†™ä½“éªŒã€‚è¶…ä½å»¶è¿Ÿï¼Œç¬”å°–åé¦ˆè¿…é€Ÿå‡†ç¡®ã€‚å†…ç½®å¯ç¼–ç¨‹æŒ‰é”®ï¼Œå¯è‡ªå®šä¹‰å¸¸ç”¨åŠŸèƒ½ã€‚ç£å¸å……ç”µï¼Œç»­èˆªé•¿è¾¾ 12 å°æ—¶ã€‚å…¼å®¹ Xin-Pad å’Œå…¶ä»–ä¸»æµå¹³æ¿è®¾å¤‡ã€‚æ˜¯æ‚¨è¿›è¡Œæ•°å­—ç»˜ç”»ã€å·¥ç¨‹è®¾è®¡å’Œå­¦ä¹ ç¬”è®°çš„ç†æƒ³ä¼™ä¼´ã€‚"
                },
                { 
                    id: 5, name: "æ™ºæ ¸è¶…å®½å¸¦è·¯ç”±å™¨", category: "æ™ºèƒ½å®¶å±…", price: 1299, stock: 0, 
                    images: ['https://s2.loli.net/2024/02/09/jE2oY7Pz5Vq1Gxl.jpg', 'https://s2.loli.net/2024/02/09/iS9P8ZlY6oU5xKj.jpg', 'https://s2.loli.net/2024/02/09/FzM9p4rY5w0uV2q.jpg'],
                    shortDesc: "WiFi 7 æ ‡å‡†ï¼Œå…¨å±‹æ— ç¼è¦†ç›–ï¼Œæ”¯æŒ AI æµé‡è°ƒåº¦ã€‚",
                    longDesc: "è¿™æ¬¾è·¯ç”±å™¨æ”¯æŒæœ€æ–°çš„ WiFi 7 (802.11be) æ ‡å‡†ï¼Œæä¾›é«˜è¾¾ 48Gbps çš„ç†è®ºååé‡ã€‚é‡‡ç”¨åˆ†å¸ƒå¼ç½‘çŠ¶ç½‘ç»œæŠ€æœ¯ï¼Œç¡®ä¿å…¨å±‹æ— æ­»è§’è¦†ç›–ã€‚å†…ç½® AI æµé‡è°ƒåº¦å¼•æ“ï¼Œèƒ½å¤Ÿæ™ºèƒ½è¯†åˆ«è®¾å¤‡ç±»å‹å¹¶ä¼˜åŒ–å¸¦å®½åˆ†é…ï¼Œä¼˜å…ˆä¿éšœæ¸¸æˆã€4K è§†é¢‘ç­‰é«˜ä¼˜å…ˆçº§åº”ç”¨ã€‚æ”¯æŒ OFDMAã€MLO ç­‰å…ˆè¿›æŠ€æœ¯ï¼Œå¤šè®¾å¤‡åŒæ—¶è¿æ¥ä¹Ÿèƒ½ä¿æŒé«˜é€Ÿç¨³å®šã€‚é€šè¿‡ Xin-Home App è½»æ¾ç®¡ç†ã€‚"
                }
            ]);

            // ä¸¥è°¨çš„è´­ç‰©è½¦æŒä¹…åŒ–
            const cart = ref(JSON.parse(localStorage.getItem('xin_shop_v3_cart') || '[]'));
            // ä¸¥è°¨çš„è®¢å•å†å²æŒä¹…åŒ–
            const orders = ref(JSON.parse(localStorage.getItem('xin_shop_v3_orders') || '[]'));

            // --- è®¡ç®—å±æ€§ (æ ¸å¿ƒé€»è¾‘) ---
            const filteredProducts = computed(() => {
                let p = products.value;
                if (activeCategory.value !== 'å…¨éƒ¨') {
                    p = p.filter(prod => prod.category === activeCategory.value);
                }
                if (searchQuery.value) {
                    p = p.filter(prod => prod.name.toLowerCase().includes(searchQuery.value.toLowerCase()));
                }
                return p;
            });

            const cartCount = computed(() => cart.value.reduce((sum, item) => sum + item.qty, 0));
            const subtotal = computed(() => cart.value.reduce((sum, item) => sum + (item.price * item.qty), 0));
            const shippingFee = computed(() => subtotal.value >= 2000 || subtotal.value === 0 ? 0 : 20);
            const total = computed(() => subtotal.value + shippingFee.value);

            const isPaymentFormValid = computed(() => {
                const { cardNumber, expiryDate, cvv } = paymentDetails.value;
                // ä¸¥è°¨çš„æ ¡éªŒè§„åˆ™ (æ¨¡æ‹Ÿ)
                const cardValid = /^\d{4}\s?\d{4}\s?\d{4}\s?\d{4}$/.test(cardNumber);
                const expiryValid = /^(0[1-9]|1[0-2])\/\d{2}$/.test(expiryDate);
                const cvvValid = /^\d{3}$/.test(cvv);
                return cardValid && expiryValid && cvvValid && cart.value.length > 0;
            });

            // --- æ–¹æ³• (è¡Œä¸ºé€»è¾‘) ---

            // è´­ç‰©è½¦æ“ä½œ
            const addToCart = (product) => {
                if (product.stock === 0) {
                    alert("æŠ±æ­‰ï¼Œè¯¥å•†å“å·²å”®ç½„ï¼");
                    return;
                }
                const itemInCart = cart.value.find(item => item.id === product.id);
                if (itemInCart) {
                    if (itemInCart.qty < product.stock) {
                        itemInCart.qty++;
                    } else {
                        alert(`åº“å­˜ä¸è¶³ï¼${product.name} ä»…å‰© ${product.stock} ä»¶ã€‚`);
